<!DOCTYPE html>
<html>
  <head>
    <title>Task Management</title>
  </head>
  <body>
    <h1>Tasks</h1>

    <form method="post" action="/tasks/">
      <input type="text" name="title" placeholder="Task Title" required />
      <input type="text" name="description" placeholder="Description" />
      <label for="status">Status:</label>
      <select name="status" id="status">
        <option value="To Do">To Do</option>
        <option value="In Progress">In Progress</option>
        <option value="Done">Done</option>
      </select>
      <label for="priority">Priority:</label>
      <select name="priority" id="priority">
        <option value="Low">Low</option>
        <option value="Medium">Medium</option>
        <option value="High">High</option>
      </select>
      <button type="submit">Add Task</button>
    </form>

    <ul>
      <h2>Current Tasks:</h2>
      {% for task in tasks %}
      <li>
        <h1>{{ task.title }}</h1>
        <h2>{{ task.description or "No description" }}</h2>
        <h3>Status: {{ task.status.value }}</h3>
        <h3>Priority: {{ task.priority.value }}</h3>

        <form method="post" action="/tasks/{{ task.id }}/update/">
          <h3>Update task: </h3>
          <label for="status_update_{{ task.id }}">Status:</label>
          <select name="status" id="status_update_{{ task.id }}">
            <option value="To Do" {% if task.status.value == 'To Do' %}selected{% endif %}>To Do</option>
            <option value="In Progress" {% if task.status.value == 'In Progress' %}selected{% endif %}>In Progress</option>
            <option value="Done" {% if task.status.value == 'Done' %}selected{% endif %}>Done</option>
          </select>
          <label for="priority_update_{{ task.id }}">Priority:</label>
          <select name="priority" id="priority_update_{{ task.id }}">
            <option value="Low" {% if task.priority.value == 'Low' %}selected{% endif %}>Low</option>
            <option value="Medium" {% if task.priority.value == 'Medium' %}selected{% endif %}>Medium</option>
            <option value="High" {% if task.priority.value == 'High' %}selected{% endif %}>High</option>
          </select>
          <button type="submit">Update</button>
        </form>
      </li>
      {% endfor %}
    </ul>
  </body>
</html>